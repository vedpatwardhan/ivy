

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Contributing to Ivy &mdash; Ivy 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Array api" href="array/array_api.html" />
    <link rel="prev" title="Training a Network" href="training_a_network.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Ivy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="why_ivy.html">Why Ivy?</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_ivy.html">Using Ivy</a></li>
<li class="toctree-l1"><a class="reference internal" href="training_a_network.html">Training a Network</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contributing to Ivy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#array-api-standardization">Array API Standardization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#keeping-your-fork-updated">Keeping Your Fork Updated</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-pull-requests">Creating Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#submodule-design">Submodule Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ivy-api">Ivy API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#backend-api">Backend API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#array-operators">Array Operators</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Array</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="array/array_api.html">Array api</a></li>
<li class="toctree-l1"><a class="reference internal" href="array/conversions.html">Conversions</a></li>
<li class="toctree-l1"><a class="reference internal" href="array/device.html">Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="array/general.html">General</a></li>
<li class="toctree-l1"><a class="reference internal" href="array/gradients.html">Gradients</a></li>
<li class="toctree-l1"><a class="reference internal" href="array/image.html">Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="array/linalg.html">Linalg</a></li>
<li class="toctree-l1"><a class="reference internal" href="array/logic.html">Logic</a></li>
<li class="toctree-l1"><a class="reference internal" href="array/math.html">Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="array/meta.html">Meta</a></li>
<li class="toctree-l1"><a class="reference internal" href="array/random.html">Random</a></li>
<li class="toctree-l1"><a class="reference internal" href="array/reductions.html">Reductions</a></li>
</ul>
<p class="caption"><span class="caption-text">Functional</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="functional/backends.html">Backends</a></li>
<li class="toctree-l1"><a class="reference internal" href="functional/ivy.html">Ivy</a></li>
</ul>
<p class="caption"><span class="caption-text">Graph compiler</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="graph_compiler/compiler.html">Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="graph_compiler/globals.html">Globals</a></li>
<li class="toctree-l1"><a class="reference internal" href="graph_compiler/graph.html">Graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="graph_compiler/helpers.html">Helpers</a></li>
<li class="toctree-l1"><a class="reference internal" href="graph_compiler/op_logging.html">Op logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="graph_compiler/param.html">Param</a></li>
</ul>
<p class="caption"><span class="caption-text">Stateful</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="stateful/activations.html">Activations</a></li>
<li class="toctree-l1"><a class="reference internal" href="stateful/converters.html">Converters</a></li>
<li class="toctree-l1"><a class="reference internal" href="stateful/initializers.html">Initializers</a></li>
<li class="toctree-l1"><a class="reference internal" href="stateful/layers.html">Layers</a></li>
<li class="toctree-l1"><a class="reference internal" href="stateful/module.html">Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="stateful/norms.html">Norms</a></li>
<li class="toctree-l1"><a class="reference internal" href="stateful/optimizers.html">Optimizers</a></li>
<li class="toctree-l1"><a class="reference internal" href="stateful/sequential.html">Sequential</a></li>
</ul>
<p class="caption"><span class="caption-text">Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ivy"">Ivy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mech"">Ivy mech</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vision"">Ivy vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robot"">Ivy robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gym"">Ivy gym</a></li>
<li class="toctree-l1"><a class="reference internal" href="../memory"">Ivy memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../builder"">Ivy builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models"">Ivy models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystem"">Ivy ecosystem</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Ivy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Contributing to Ivy</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/contributing.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="contributing-to-ivy">
<h1>Contributing to Ivy<a class="headerlink" href="#contributing-to-ivy" title="Permalink to this headline">¶</a></h1>
<div class="section" id="array-api-standardization">
<h2>Array API Standardization<a class="headerlink" href="#array-api-standardization" title="Permalink to this headline">¶</a></h2>
<p>One of the key tasks currently underway is to update Ivy to conform to the <a class="reference external" href="https://data-apis.org/array-api/latest/">Array API</a> standard. The YouTube <a class="reference external" href="https://www.youtube.com/channel/UCGlkr-YCs3TjMVeOhbbULsw">tutorial series</a>
is the best starting reference for this task.</p>
<p>A few points are made here. You should first check what methods are still available to work on. Methods are reserved by
contributors in the community by creating an issue, and then commented with a link to this issue on one of the ToDo list issues,
which has labels “ToDo” and “Array API”. There are not many methods left to be worked on.</p>
<p>As explained in the YouTube <a class="reference external" href="https://www.youtube.com/channel/UCGlkr-YCs3TjMVeOhbbULsw">tutorial series</a>, you can test for each backend seperately by replacing
<code class="code docutils literal notranslate"><span class="pre">array_module</span> <span class="pre">=</span> <span class="pre">None</span></code> with lines <code class="code docutils literal notranslate"><span class="pre">import</span> <span class="pre">ivy</span> <span class="pre">as</span> <span class="pre">array_module</span></code> and <code class="code docutils literal notranslate"><span class="pre">array_module.set_framework('torch')</span></code>
for example.</p>
<p>Once you have got the unit tests passing for each backend for your particular method, you should then make sure your changes have not
inadvertently caused other unit tests to fail. First, uncomment your method in the folder
<code class="code docutils literal notranslate"><span class="pre">ivy_tests/array_api_methods_to_test</span></code>, add back the line <code class="code docutils literal notranslate"><span class="pre">array_module</span> <span class="pre">=</span> <span class="pre">None</span></code>, and then verify all other flagged methods are passing without error as explained below.</p>
<p>This is required for each backend framework <code class="code docutils literal notranslate"><span class="pre">numpy</span></code>, <code class="code docutils literal notranslate"><span class="pre">jax</span></code>,
<code class="code docutils literal notranslate"><span class="pre">torch</span></code> and <code class="code docutils literal notranslate"><span class="pre">tensorflow</span></code>. You can test all of these tests locally by running
<code class="code docutils literal notranslate"><span class="pre">./test_array_api.sh</span> <span class="pre">backend_name</span></code>, for example <code class="code docutils literal notranslate"><span class="pre">./test_array_api.sh</span> <span class="pre">torch</span></code> or
<code class="code docutils literal notranslate"><span class="pre">./test_array_api.sh</span> <span class="pre">jax</span></code>.</p>
</div>
<div class="section" id="keeping-your-fork-updated">
<h2>Keeping Your Fork Updated<a class="headerlink" href="#keeping-your-fork-updated" title="Permalink to this headline">¶</a></h2>
<p>There is a script in the root repo <code class="code docutils literal notranslate"><span class="pre">merge_with_upstream.sh</span></code>. To update your local fork to the upstream master
branch, simply run <code class="code docutils literal notranslate"><span class="pre">./merge_with_upstream.sh</span> <span class="pre">name_of_your_branch</span></code>. If you are simply developing in master branch
(the default is you haven’t explicitly created any new branches), then simply run <code class="code docutils literal notranslate"><span class="pre">./merge_with_upstream.sh</span> <span class="pre">master</span></code>.</p>
<p>If you are developing for pull requests (PRs), then it is common to create PR-specific branches. In this case, you would
run <code class="code docutils literal notranslate"><span class="pre">./merge_with_upstream.sh</span> <span class="pre">name_of_your_pr_branch</span></code>.</p>
</div>
<div class="section" id="creating-pull-requests">
<h2>Creating Pull Requests<a class="headerlink" href="#creating-pull-requests" title="Permalink to this headline">¶</a></h2>
<p>Our process for responding to pull requests is simple. All newly created PRs will be reviewed by a member of the team,
and then the PR will either be merged or changes will be requested. In order for us to look at the changes you have made,
you will need to request a code review. We will then take another look, and either merge or request further changes.
This process then will repeat until either the PR is closed by us or yourslef, or the PR is merged.</p>
<p>If you make changes and do not request a code review, we will not check the changes. This is the case even if you
comment on the PR. This simple process makes it much simpler for us to track where and when attention is needed.</p>
<p>Finally, all PRs must give write access to Ivy maintainers of the branch. This can be done by checking a tickbox in the
lower right corner of the PR. This will enable us to quickly fix conflicts, merge with upstream, and get things moving
much more quickly without us needing to request very simple fixes from yourself.</p>
</div>
<div class="section" id="submodule-design">
<h2>Submodule Design<a class="headerlink" href="#submodule-design" title="Permalink to this headline">¶</a></h2>
<p>Many already-implemented methods will need to be moved into new locations during various stages of refactoring.
The package is designed so all methods are called directly from the <code class="code docutils literal notranslate"><span class="pre">ivy</span></code> namespace, such as <code class="code docutils literal notranslate"><span class="pre">ivy.matmul</span></code>,
and not <code class="code docutils literal notranslate"><span class="pre">ivy.some_namespace.matmul</span></code>. Therefore, inside any of the folders <code class="code docutils literal notranslate"><span class="pre">ivy.functional.ivy</span></code>,
<code class="code docutils literal notranslate"><span class="pre">ivy.functional.backends.some_backend</span></code>, <code class="code docutils literal notranslate"><span class="pre">ivy.functional.backends.another_backend</span></code> the functions can be moved
to different files or folders without breaking anything. This makes it very simple to continually refactor and re-organize
the code structure in an ongoing manner.</p>
<p>Currently, we are in the process of refactoring things to more closely follow the Array API standard. Many methods will
need to be moved to new locations. Again, this is not a problem, provided the <code class="code docutils literal notranslate"><span class="pre">__init__</span></code> files have the correct
imports. Generally, these files look like the following, so that both the submodule namespace is imported but also
all methods.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">dtype</span>
<span class="kn">from</span> <span class="nn">.dtype</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">general</span>
<span class="kn">from</span> <span class="nn">.general</span> <span class="kn">import</span> <span class="o">*</span>
<span class="c1"># etc.</span>
</pre></div>
</div>
</div>
<div class="section" id="ivy-api">
<h2>Ivy API<a class="headerlink" href="#ivy-api" title="Permalink to this headline">¶</a></h2>
<p>All function signatures for the Ivy API are defined in the <code class="code docutils literal notranslate"><span class="pre">ivy.functional.ivy</span></code> submodule. Functions written here
should adhere to the following type hint format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_func</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ivy</span><span class="o">.</span><span class="n">Array</span><span class="p">,</span> <span class="n">ivy</span><span class="o">.</span><span class="n">NativeArray</span><span class="p">],</span>
            <span class="n">axes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span>
            <span class="n">dtype</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">ivy</span><span class="o">.</span><span class="n">Dtype</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">dev</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">ivy</span><span class="o">.</span><span class="n">Dev</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> \
        <span class="o">-&gt;</span> <span class="n">ivy</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    My function does something cool.</span>

<span class="sd">    :param x: input array.</span>
<span class="sd">    :param axes: the axes along which to perform the op.</span>
<span class="sd">    :param dtype: array data type.</span>
<span class="sd">    :param dev: the device on which to place the new array.</span>
<span class="sd">    :return: a cooler array.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_cur_framework</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">my_func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">dev</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that the input array has type <code class="code docutils literal notranslate"><span class="pre">Union[ivy.Array,</span> <span class="pre">ivy.NativeArray]</span></code> whereas the output array has type
<code class="code docutils literal notranslate"><span class="pre">ivy.Array</span></code>. This is the case for all functions in the ivy API.
We always return an <code class="code docutils literal notranslate"><span class="pre">ivy.Array</span></code> instance to ensure that any subsequent Ivy code is fully framework-agnostic, with
all operators performed on the array being handled by Ivy, and not the backend framework. However, there is no need to
prevent native arrays from being permitted in the input. For Ivy methods which wrap backend-specific implementations, the
input would need to be converted to a native array (such as <code class="code docutils literal notranslate"><span class="pre">torch.Tensor</span></code>) anyway before calling the backend method,
and for Ivy methods implemented as a composition of other Ivy methods such as <code class="code docutils literal notranslate"><span class="pre">ivy.lstm_update</span></code>, the native inputs can
just be converted to <code class="code docutils literal notranslate"><span class="pre">ivy.Array</span></code> instances before executing the Ivy implementation.</p>
<p>As for the <code class="code docutils literal notranslate"><span class="pre">axes</span></code> arg, generally the <a class="reference external" href="https://data-apis.org/array-api/latest/">Array API</a> standard dictates that shapes, axes and other similar args should be
of type <code class="code docutils literal notranslate"><span class="pre">Tuple[int]</span></code> when representing a sequence, not <code class="code docutils literal notranslate"><span class="pre">List[int]</span></code>. However, in order to make Ivy code
less brittle, we accept both tuples and lists for such arguments. This does not break the standard, as the standard is only
intended to define a subset of required function behaviour. The standard can be freely extended, as we are doing here.</p>
<p>As for the other arguments in the example above, <code class="code docutils literal notranslate"><span class="pre">dtype</span></code> and <code class="code docutils literal notranslate"><span class="pre">dev</span></code> do not need to be added to all methods,
these are just examples. These should be added to all creation methods though. Note that for both of these, the type is a
<code class="code docutils literal notranslate"><span class="pre">Union</span></code> including <code class="code docutils literal notranslate"><span class="pre">str</span></code>. This is because, in order to remain fully framework agnostic, Ivy accepts string
representations of devices and data types, such as <code class="code docutils literal notranslate"><span class="pre">&quot;int32&quot;</span></code>, <code class="code docutils literal notranslate"><span class="pre">&quot;float32&quot;</span></code>, <code class="code docutils literal notranslate"><span class="pre">&quot;bool&quot;</span></code>, <code class="code docutils literal notranslate"><span class="pre">&quot;cpu&quot;</span></code>,
<code class="code docutils literal notranslate"><span class="pre">&quot;gpu0&quot;</span></code>, <code class="code docutils literal notranslate"><span class="pre">&quot;gpu2&quot;</span></code> etc.</p>
<p>All functions which adhere to the <a class="reference external" href="https://data-apis.org/array-api/latest/">Array API</a> standard should be placed in the submodule <code class="code docutils literal notranslate"><span class="pre">ivy.functional.ivy.array_api</span></code>,
and should also be placed in the correct file in alignment with the categories used in the standard.</p>
</div>
<div class="section" id="backend-api">
<h2>Backend API<a class="headerlink" href="#backend-api" title="Permalink to this headline">¶</a></h2>
<p>Code in the backend submodules such as <code class="code docutils literal notranslate"><span class="pre">ivy.functional.backends.torch</span></code> should then look something like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_func</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">,</span>
            <span class="n">dtype</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">dev</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> \
        <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
    <span class="n">dtype</span> <span class="o">=</span> <span class="n">ivy</span><span class="o">.</span><span class="n">dtype_from_str</span><span class="p">(</span><span class="n">ivy</span><span class="o">.</span><span class="n">default_dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
    <span class="n">dev</span> <span class="o">=</span> <span class="n">ivy</span><span class="o">.</span><span class="n">dev_from_str</span><span class="p">(</span><span class="n">ivy</span><span class="o">.</span><span class="n">default_dev</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">torch</span><span class="o">.</span><span class="n">something_cool</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">dev</span><span class="p">)</span>
</pre></div>
</div>
<p>Specifically, we should use type hints for all arguments in the Ivy API and also the backend APIs. These type hints
should be identical apart from all <code class="code docutils literal notranslate"><span class="pre">ivy.Array</span></code>, <code class="code docutils literal notranslate"><span class="pre">ivy.Dtype</span></code> and <code class="code docutils literal notranslate"><span class="pre">ivy.Dev</span></code> types replaced by
framework-specific types, in this case <code class="code docutils literal notranslate"><span class="pre">torch.Tensor</span></code>, <code class="code docutils literal notranslate"><span class="pre">torch.dtype</span></code> and <code class="code docutils literal notranslate"><span class="pre">torch.device</span></code>.</p>
<p>The backend methods should not add a docstring, as this would be identical to the docstring provided in the Ivy API.</p>
<p>All backend functions which adhere to the <a class="reference external" href="https://data-apis.org/array-api/latest/">Array API</a> standard should also be placed in submodules such as
<code class="code docutils literal notranslate"><span class="pre">ivy.functional.backends.torch.array_api</span></code>, and should also be placed in the correct file in alignment with the
categories used in the standard.</p>
</div>
<div class="section" id="array-operators">
<h2>Array Operators<a class="headerlink" href="#array-operators" title="Permalink to this headline">¶</a></h2>
<p>Array operators are defined in the <code class="code docutils literal notranslate"><span class="pre">ivy.array</span></code> submodule. Operators written here should adhere to the following format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@_native_wrapper</span>
<span class="k">def</span> <span class="fm">__pow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">power</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">ivy</span><span class="o">.</span><span class="n">builtin_pow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">power</span><span class="p">)</span>
</pre></div>
</div>
<p>There is no need to write docstrings or type hints for these methods, as they should always defer to a method such as
<code class="code docutils literal notranslate"><span class="pre">ivy.builtin_some_op</span></code>, which will itself have a docstring and type hints.
The remaining code is essentially simple wrapper code around this builtin ivy method.</p>
<p>The associated ivy backend methods should be placed in the same file as the operators. For example, <code class="code docutils literal notranslate"><span class="pre">__pow__</span></code> is
an arithmetic operator, and so this operator should be placed in the submodule <code class="code docutils literal notranslate"><span class="pre">ivy.array.array_api.arithmetic_operators</span></code>.
The method <code class="code docutils literal notranslate"><span class="pre">ivy.builtin_pow</span></code> should also be placed in <code class="code docutils literal notranslate"><span class="pre">ivy.array.array_api.arithmetic_operators</span></code>.</p>
<p>For most methods and backends these are very simple to implement, such as <code class="code docutils literal notranslate"><span class="pre">ivy.builtin_pow</span></code> below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># noinspection PyShadowingBuiltins</span>
<span class="k">def</span> <span class="nf">builtin_pow</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">ivy</span><span class="o">.</span><span class="n">Array</span><span class="p">,</span>
                <span class="n">other</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ivy</span><span class="o">.</span><span class="n">Array</span><span class="p">])</span> \
        <span class="o">-&gt;</span> <span class="n">ivy</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates an implementation-dependent approximation of exponentiation by raising each element (the base) of an</span>
<span class="sd">    array instance to the power of other_i (the exponent), where other_i is the corresponding element of the array other.</span>

<span class="sd">    :param self: array instance whose elements correspond to the exponentiation base. Should have a numeric data type.</span>
<span class="sd">    :param other: other array whose elements correspond to the exponentiation exponent. Must be compatible with x</span>
<span class="sd">                    (see Broadcasting). Should have a numeric data type.</span>
<span class="sd">    :return: an array containing the element-wise results. The returned array must have a data type determined by</span>
<span class="sd">              Type Promotion Rules.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__pow__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</pre></div>
</div>
<p>However, for some backends this does not work. For example, MXNet does not support reshaping arrays to 0-dim arrays,
but this is required by the standard. Therefore, we’ve written custom methods for handling 0-dim arrays. For backends
such as this where more customization is needed, then we must simply redefine these methods, such as <code class="code docutils literal notranslate"><span class="pre">ivy.builtin_pow</span></code>,
in the associated backend submodule, in this case <code class="code docutils literal notranslate"><span class="pre">ivy.functional.backends.mxnet.array_builtins.array_api.arithmetic_operators</span></code>.</p>
<p>The custom MXNet code is as follows, with the addition of an MXNet-specific function decorator to properly handle flat arrays:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@_handle_flat_arrays_in_out</span>
<span class="k">def</span> <span class="nf">builtin_pow</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">mx</span><span class="o">.</span><span class="n">ndarray</span><span class="o">.</span><span class="n">ndarray</span><span class="o">.</span><span class="n">NDArray</span><span class="p">,</span>
                <span class="n">other</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">mx</span><span class="o">.</span><span class="n">ndarray</span><span class="o">.</span><span class="n">ndarray</span><span class="o">.</span><span class="n">NDArray</span><span class="p">])</span> \
            <span class="o">-&gt;</span> <span class="n">mx</span><span class="o">.</span><span class="n">ndarray</span><span class="o">.</span><span class="n">ndarray</span><span class="o">.</span><span class="n">NDArray</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__pow__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</pre></div>
</div>
<p>Again, a docstring is not needed given that this is the same as the one provided in <code class="code docutils literal notranslate"><span class="pre">ivy.array.array_api.arithmetic_operators</span></code>.
For other backends, we do not need to specify a custom <code class="code docutils literal notranslate"><span class="pre">builtin_pow</span></code> method. These will default to the version implemented in
<code class="code docutils literal notranslate"><span class="pre">ivy.array.array_api.arithmetic_operators</span></code> if no custom implementation is provided.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="array/array_api.html" class="btn btn-neutral float-right" title="Array api" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="training_a_network.html" class="btn btn-neutral float-left" title="Training a Network" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Ivy Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>